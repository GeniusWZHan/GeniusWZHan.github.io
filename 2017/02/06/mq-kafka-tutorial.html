<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="kongwenqiang" />



<meta name="description" content="本文翻译自：apache_kafka_tutorial.pdf
kafka背景Kafka最初是由LinkedIn开发，并于2011年成为Apache的一个开源项目，随后在2012变为Apache的一个顶级项目。kafka是由Scala和Java语言编写的的。Kafka是一个基于发布-订阅，具有容错的消息系统。具有高性能，可扩展，分布式等特性。">
<meta property="og:type" content="article">
<meta property="og:title" content="kafka入门教程">
<meta property="og:url" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial.html">
<meta property="og:site_name" content="戒修-沉迷技术的小沙弥">
<meta property="og:description" content="本文翻译自：apache_kafka_tutorial.pdf
kafka背景Kafka最初是由LinkedIn开发，并于2011年成为Apache的一个开源项目，随后在2012变为Apache的一个顶级项目。kafka是由Scala和Java语言编写的的。Kafka是一个基于发布-订阅，具有容错的消息系统。具有高性能，可扩展，分布式等特性。">
<meta property="og:image" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial/point-to-point-model.jpeg">
<meta property="og:image" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial/pub-sub-model.jpeg">
<meta property="og:image" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial/kafka-foundamental.jpeg">
<meta property="og:image" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial/kafka-cluster.jpeg">
<meta property="og:updated_time" content="2018-02-06T11:32:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kafka入门教程">
<meta name="twitter:description" content="本文翻译自：apache_kafka_tutorial.pdf
kafka背景Kafka最初是由LinkedIn开发，并于2011年成为Apache的一个开源项目，随后在2012变为Apache的一个顶级项目。kafka是由Scala和Java语言编写的的。Kafka是一个基于发布-订阅，具有容错的消息系统。具有高性能，可扩展，分布式等特性。">
<meta name="twitter:image" content="https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial/point-to-point-model.jpeg">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="戒修-沉迷技术的小沙弥" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>kafka入门教程 | 戒修-沉迷技术的小沙弥</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<script src="/js/search.js"></script>
<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">kongwenqiang</a></h1>
        </hgroup>

        
        <p class="header-subtitle">我喜欢GO</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:leokongwq@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/leokongwq" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/">AOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveMQ/">ActiveMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveQM/">ActiveQM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDD/">DDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GO/">GO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/">MQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET/">NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openresy/">Openresy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REST/">REST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/">TCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algo/">algo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aop/">aop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computer/">computer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/consul/">consul</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devtools/">devtools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gossip/">gossip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/guava/">guava</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/">hive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java8/">java8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/">jdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jta/">jta</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/">lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microservices/">microservices</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/">mq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oauth2/">oauth2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openresty/">openresty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pig/">pig</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soa/">soa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-mvc/">spring-mvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springMVC/">springMVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqoop/">sqoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uml/">uml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vert-x/">vert.x</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web安全/">web安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xa/">xa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并发/">并发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微服务/">微服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.imhan.com">Hanny&#39;s Blog</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://www.chepoo.com">IT技术精华网</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">只想做个好程序员!</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">kongwenqiang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">kongwenqiang</a></h1>
            </hgroup>
            
            <p class="header-subtitle">我喜欢GO</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:leokongwq@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/leokongwq" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-mq-kafka-tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/06/mq-kafka-tutorial.html" class="article-date">
      <time datetime="2017-02-06T14:25:30.000Z" itemprop="datePublished">2017-02-06</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      kafka入门教程
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/MQ/">MQ</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kafka/">kafka</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>本文翻译自：apache_kafka_tutorial.pdf</p>
<h3 id="kafka背景"><a href="#kafka背景" class="headerlink" title="kafka背景"></a>kafka背景</h3><p>Kafka最初是由LinkedIn开发，并于2011年成为Apache的一个开源项目，随后在2012变为Apache的一个顶级项目。kafka是由Scala和Java语言编写的的。Kafka是一个基于发布-订阅，具有容错的消息系统。具有高性能，可扩展，分布式等特性。</p>
<a id="more"></a>
<h3 id="kafka介绍"><a href="#kafka介绍" class="headerlink" title="kafka介绍"></a>kafka介绍</h3><p>在大数据领域中，我们会使用了大量的数据。 关于大数据，我们有两个主要挑战。第一个挑战是如何收集大量的数据，第二个挑战是分析收集到的数据。为了克服这些挑战，你需要一个消息系统。Kafka的设计目标就是称为一个分布式，高吞吐量的消息系统。Kafka也可以作为一个传统的消息中间件的替代品。 与其他消息系统相比，Kafka具有更好的吞吐量，内置分区，复制和固有的容错能力，这使得它非常适合大规模消息处理应用程序。</p>
<h4 id="什么是消息系统？"><a href="#什么是消息系统？" class="headerlink" title="什么是消息系统？"></a>什么是消息系统？</h4><p>消息系统负责将数据从一个应用程序传输到另一个应用程序，因此应用程序可以专注于数据，但不用关心消息如何共享。 分布式消息传递基于可靠消息队列的概念。 消息在客户端应用程序和消息传递系统之间异步排队。 有两种类型的消息模式可用：一种是点对点，另一种是发布-订阅（pub-sub）消息系统。 大多数消息模式遵循pub-sub。</p>
<h5 id="点对点消息系统"><a href="#点对点消息系统" class="headerlink" title="点对点消息系统"></a>点对点消息系统</h5><p>在点对点消息系统中，消息被保留在队列中。 一个或多个消费者可以消费队列中的消息，但是特定消息最多只能由一个消费者消费。 一旦消费者读取队列中的消息，它就从该队列中消失。 该系统的典型示例是订单处理系统，其中每个订单将由一个订单处理器处理，但多个订单处理器也可以同时工作。 下图描述了结构。</p>
<img src="/2017/02/06/mq-kafka-tutorial/point-to-point-model.jpeg" alt="point-to-point-model.jpeg" title="">
<h5 id="发布-订阅消息系统"><a href="#发布-订阅消息系统" class="headerlink" title="发布-订阅消息系统"></a>发布-订阅消息系统</h5><p>在发布-订阅系统中，消息被保留在一个主题中。与点对点系统不同，消费者可以订阅一个或多个主题并使用该主题中的所有消息。在发布-订阅系统中，消息生产者称为发布者，消息使用者称为订阅者。 一个现实生活的例子是Dish电视，它发布不同的渠道，如运动，电影，音乐等，任何人都可以订阅自己的频道集，并在这些订阅的频道可用时获得它们。</p>
<img src="/2017/02/06/mq-kafka-tutorial/pub-sub-model.jpeg" alt="pub-sub-model.jpeg" title="">
<h4 id="kafka是什么？"><a href="#kafka是什么？" class="headerlink" title="kafka是什么？"></a>kafka是什么？</h4><p>Apache Kafka是一个分布式发布 - 订阅消息系统和一个强大的队列，可以处理大量的数据，并使您能够将消息从一个端点传递到另一个端点。 Kafka适合离线和在线消息消费。 Kafka消息保留在磁盘上，并在群集内复制以防止数据丢失。 Kafka构建在ZooKeeper同步服务之上。 它与Apache Storm和Spark非常好地集成，用于实时流式数据分析。</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><p>以下是Kafka的几个优点：</p>
<p>可靠性 - Kafka 是一个分布式，消息分区的，拥有消息复制和容错的系统。<br>扩展性 - Kafka消息系统可以实现在线扩展<br>可用性 - Kafka 使用 “分布式的commit log”，这也意味着消息会尽可能快的持久化到磁盘。<br>高性能 - Kafka 针对消息发送和消费都有很高的吞吐量。 即使保存了TB级别的数据性能也不会下降。</p>
<p>Kafka 非常快并保证零宕机和零消息丢失。</p>
<h5 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h5><p>kafka通常用于下面的使用场景：</p>
<ul>
<li>监控<br>Kafka通常用于监控数据的操作。 这涉及聚合来自分布式应用程序的统计信息，以产生集中化的操作数据。</li>
<li>日志聚合方案<br>kafka可以用来收集跨组织的多个服务的日志，并将这些日志转为统一的格式供消费者使用。</li>
<li>流式处理<br>流行的实时计算框架，如<code>Storm</code>和<code>Spark</code>流式读取<code>topic</code>中的数据进行处理，然后将处理的结果写入新的，用户或应用需要使用的<code>topic</code>中。Kafka强大的持久性功能在流式处理上下文中也是非常有用的。</li>
</ul>
<h4 id="need-for-Kafka"><a href="#need-for-Kafka" class="headerlink" title="need for Kafka"></a>need for Kafka</h4><p>Kafka是一个统一的平台，用于处理所有实时数据Feed。 Kafka支持低延迟消息传递，并在出现机器故障时提供对容错的保证。它具有处理大量不同消费者的能力。 Kafka非常快，执行2百万w/s。 Kafka将所有数据保存到磁盘，这实质上意味着所有写入都会进入操作系统（RAM）的页面缓存。 这使得将数据从页面缓存传输到网络套接字非常有效。</p>
<h3 id="Kafka基础概念"><a href="#Kafka基础概念" class="headerlink" title="Kafka基础概念"></a>Kafka基础概念</h3><p>在深入了解Kafka之前，你应该先了解一些基本的术语。像<code>topics</code>,<code>brokers</code>,<code>producers</code>,<code>consumers</code>。下图说明了主要的术语并且表格对这些术语进行了详细的解释。</p>
<img src="/2017/02/06/mq-kafka-tutorial/kafka-foundamental.jpeg" alt="kafka-foundamental.jpeg" title="">
<p>在上图中一个<code>topic</code>被配置为拥有3个分区，分区1包含两个偏移因子0和1。分区2包含4个偏移因子0, 1, 2 和 3。分区3包含1个偏移因子0。 分区副本的id和该副本所在的broker的id一致。</p>
<p>假设，如果一个<code>topic</code>配置的副本因子为3，则kafka会针对该<code>topic</code>的每个分区创建3个独立的副本并将这些副本尽量均匀分散到集群的每个节点上。为了在集群的节点间进行负载，每一个<code>broker</code>都会保存一个或多个这样的分区。多个<code>producer</code>和<code>consumer</code>可以同时发布或获取消息。</p>
<table>
<thead>
<tr>
<th>Components</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>topics</td>
<td>隶属于特定分类的消息流称为<code>topic</code>。数据保存在topic中</td>
</tr>
<tr>
<td>partitions</td>
<td><code>topics</code>会被切分为分区。针对每一个主题，kafka最少保持一个分区。每一个这样的分区以顺序不可变的方式保存消息。一个分区有一个或多个大小相同的<code>segment</code>文件组成。<code>Topics</code>拥有多个分区，因此可以保存大量的数据</td>
</tr>
<tr>
<td>Partition offset</td>
<td>每个分区中的消息拥有一个唯一的序列id,被称为<code>offset</code></td>
</tr>
<tr>
<td>Replicas of partition</td>
<td>分区副本仅仅是分区的备份，不会对副本分区进行读写操作，只是用来防止数据丢失。</td>
</tr>
<tr>
<td>Brokers</td>
<td>1. Brokers 是维护发布消息的系统。每个broker针对每个topic可能包含0个或多个该topic的分区。假设，一个topic拥有N个分区，并且集群拥有N个broker,则每个broker会负责一个分区。2. 假设，一个topic拥有N个分区，并且集群拥有N+M个broker,则前N个broker每个处理一个分区，剩余的M个broker则不会处理任何分区 3。 假设，一个topic拥有N个分区，并且集群拥有M个broker（M &lt; N），则这些分区会在所有的broker中进行均匀分配。每个broker可能会处理一个或多个分区。这种场景不推荐使用，因为会导致热点问题和负载不均衡问题。</td>
</tr>
<tr>
<td>Kafka Cluster</td>
<td>由多个broker组成的kafka被称为kafka集群。一个kafaka集群在不停机扩展。集群负载所有消息的持久化和副本处理。</td>
</tr>
<tr>
<td>Producers</td>
<td>Producers 是向一个或多个Kafka中topic发布消息的发布者。Producers 将消息发送到 Kafka 的 brokers中。任意时刻 producer 发布到broker中的消息都会被追加到某个分区的最后一个segment文件的最后。 Producer 也可以选择消息发送到指定的分区</td>
</tr>
<tr>
<td>Consumers</td>
<td>Consumers 从broker读取数据。Consumers 订阅一个或多个 topic，并通过pull方式从broker拉取订阅的数据。</td>
</tr>
<tr>
<td>Leader</td>
<td><code>Leader</code>是负责某个分区数据读写操作的节点。每个分区都有一个<code>leader</code></td>
</tr>
<tr>
<td>Follower</td>
<td>跟随<code>leader</code>操作的节点被称为follower。如果leader节点不可用，则会从所有的fellower中挑选一个作为新的leader节点。一个follower节点作为leader节点一个普通的消费者，拉取leader数据并更新自己的数据存储。</td>
</tr>
</tbody>
</table>
<h3 id="Kafka集群架构"><a href="#Kafka集群架构" class="headerlink" title="Kafka集群架构"></a>Kafka集群架构</h3><p>看看下面的插图。 它显示了Kafka的集群工作原理。</p>
<img src="/2017/02/06/mq-kafka-tutorial/kafka-cluster.jpeg" alt="kafka-cluster.jpeg" title="">
<p>下面的表格描述了在上图中提到的每个组件的详细信息。</p>
<table>
<thead>
<tr>
<th>Components</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Broker</td>
<td>Kafka集群通常使用多个Broker来实现集群的负载均衡。 Kafka brokers 是无状态的，因为它们使用 ZooKeeper 来保持它们的集群信息。 单个Kafka Broker 每秒可以处理数十万的读写请求，即使保存了TB级的数据也不会影响性能。Kafka broker de leader  选举是通过Zookeeper实现的。</td>
</tr>
<tr>
<td>ZooKeeper</td>
<td>ZooKeeper是用来管理和协调Kafka broker 的。ZooKeeper 服务主要用来通知 producer 和 consumer 关于任何新加入Kafka集群或某个Kafka Broker宕机退出集群的消息。 根据收到Zookeeper的关于Broker的存在或失败的消息通知，然后生产者和消费者采取决定，并开始与其它Broker协调它们的任务。</td>
</tr>
<tr>
<td>Producers</td>
<td>producer将数据推送给Broker。 当新Broker启动时，所有生产者搜索它并自动发送消息到该新Broker。 Kafka Producer不等待来自Broker的确认，并以Broker可以处理的速度发送消息。</td>
</tr>
<tr>
<td>Consumers</td>
<td>由于 Kafka brokers 是无状态的， 因此需要Consumer来维护根据<code>partition offset</code>已经消费的消息数量信息。 如果 consumer 确认了一个指定消息的<code>offset</code>，那也就意味着 consumer 已经消费了该<code>offset</code>之前的所有消息。Consumer可以向Broker异步发起一个拉取消息的请求来缓存待消费的消息。consumers 也可以通过提供一个指定的<code>offset</code>值来回溯或跳过Partition中的消息。Consumer 消费消息的<code>offset</code>值是保存在ZooKeeper中的。</td>
</tr>
</tbody>
</table>
<h3 id="Kafka工作流程"><a href="#Kafka工作流程" class="headerlink" title="Kafka工作流程"></a>Kafka工作流程</h3><p>到目前为止，我们讨论了Kafka的核心该概念。现在让我们将目光转向Kafka的工作流程上。Kafka是由分裂为一个或多个partition的topic的集合。 Kafka中的partition可以认为是消息的线性排序序列，其中每个消息由它们的索引（称为offset）来标识。 Kafka集群中的所有数据是每个partition数据分区的并集。 新写入的消息写在分区的末尾，消息由消费者顺序读取。通过将消息复制到不同的Broker来提供持久性。Kafka以快速，可靠，持久，容错和零停机的方式提供基于<code>pub-sub</code>和队列模型的消息系统。 在这两种情况下，生产者只需将消息发送到topic，消费者可以根据自己的需要选择任何一种类型的消息传递系统。 让我们按照下一节中的步骤来了解消费者如何选择他们选择的消息系统。</p>
<h4 id="Pub-Sub-消息模型工作流程"><a href="#Pub-Sub-消息模型工作流程" class="headerlink" title="Pub-Sub 消息模型工作流程"></a>Pub-Sub 消息模型工作流程</h4><p>下面是 Pub-Sub 消息模型的工作流程</p>
<ul>
<li>生产者定期向topic发送消息。</li>
<li>Kafka broker 根据配置将topic的消息存储到指定的partition上。Kafka确保所有的消息均匀分布在topic的所有partition上。如果producer发送了两条消息，并且该topic有两个partition，则每个partition会有一条消息。</li>
<li>Consumer 订阅指定的topic。</li>
<li>一旦消费者订阅了topic，Kafka将向消费者提供topic的当前<code>offset</code>，并且还将<code>offset</code>保存在Zookeeper中。</li>
<li>消费者将定期请求Kafka（如100 Ms）新消息。</li>
<li>一旦Kafka从生产者接收到消息，它将这些消息转发给消费者。</li>
<li>消费者将收到消息并进行处理。</li>
<li>一旦消息被处理，消费者将向Kafka broker发送确认。</li>
<li>一旦Kafka收到确认，它将<code>offset</code>更改为新值，并在Zookeeper中更新它。 由于<code>offset</code>在Zookeeper中被维护，消费者可以正确地读取下一条消息，即使服务器宕机后重启。</li>
<li>以上流程将重复，直到消费者停止请求。</li>
<li>消费者可以随时回退/跳转到某个topic的期望<code>offset</code>处，并读取所有后续消息。</li>
</ul>
<h4 id="队列消息模型工作流程-amp-Consumer-Group"><a href="#队列消息模型工作流程-amp-Consumer-Group" class="headerlink" title="队列消息模型工作流程 &amp; Consumer Group"></a>队列消息模型工作流程 &amp; Consumer Group</h4><p>在基于队列的消息系统中，取代单个消费者的是订阅了相同topic的一群拥有相同<code>Group ID</code>的消费者集群。简单来说，订阅具有相同“组ID”的主题的消费者被认为是单个组，并且消息在它们之间共享。 让我们检查这个系统的实际工作流程。</p>
<ul>
<li>生产者定期向topic发送消息。</li>
<li>Kafka broker 根据配置将topic的消息存储到指定的partition上。</li>
<li>单个consumer以名为<code>Group-1</code>的<code>Group ID</code> 订阅名为<code>Topic-01</code>的topic。</li>
<li>Kafka 会以和Pub-Sub消息模型相同的方式和consumer进行交互知道新的消费者以同样的Group ID加入到消费者分组中。</li>
<li>一旦新的消费者加入后，Kafka将操作切换到共享模式，将所有topic的消息在两个消费者间进行均衡消费。这种共享行为直到加入的消费者结点数目达到该topic的分区数。</li>
<li>一旦消费者的数目大于topic的分区数，则新的消费者不会收到任何消息直到已经存在的消费者取消订阅。出现这种情况是因为Kafka中的每个消费者将被分配至少一个分区，并且一旦所有分区被分配给现有消费者，新消费者将必须等待。</li>
</ul>
<p>该功能被称为 “Consumer Group”。以同样的方式，Kafka将以非常简单和高效的方式提供这两种系统功能。</p>
<h4 id="ZooKeeper的角色"><a href="#ZooKeeper的角色" class="headerlink" title="ZooKeeper的角色"></a>ZooKeeper的角色</h4><p>Apache Kafka的一个关键依赖是Apache Zookeeper，它是一个分布式配置和同步服务。 Zookeeper是Kafka代理和消费者之间的协调接口。 Kafka服务器通过Zookeeper集群共享信息。 Kafka在Zookeeper中存储基本元数据，例如关于主题，代理，消费者偏移（队列读取器）等的信息。由于所有关键信息存储在Zookeeper中，并且它通常在其整个集群上复制此数据，因此Zookeeper的故障不会影响Kafka集群的状态。一旦Zookeeper重新启动， Kafka将恢复状态。 这为Kafka带来了零停机时间。 Kafka代理之间的领导者选举也通过使用Zookeeper在领导失败的情况下完成。<br>要了解更多关于Zookeeper，请参考<a href="http://www.tutorialspoint.com/zookeeper/" target="_blank" rel="external">http://www.tutorialspoint.com/zookeeper/</a></p>
<h3 id="Kafka安装步骤"><a href="#Kafka安装步骤" class="headerlink" title="Kafka安装步骤"></a>Kafka安装步骤</h3><p>下面是在你机器上安装Java的步骤：</p>
<h4 id="步骤-1-校验Java是否安装"><a href="#步骤-1-校验Java是否安装" class="headerlink" title="步骤 1: 校验Java是否安装"></a>步骤 1: 校验Java是否安装</h4><p>但愿你的机器上已经安装了Java环境，因此你可以通过下面的命令检查Java是否已经安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ java -version</span>
</pre></td></tr></table></figure>
<p>如果你的机器上已经安装了Java，则你会看到Java的版本信息。</p>
<h5 id="步骤-1-1-下载-JDK"><a href="#步骤-1-1-下载-JDK" class="headerlink" title="步骤 1.1: 下载 JDK"></a>步骤 1.1: 下载 JDK</h5><p>如果你还没有下载JDK，则可以通过下面的链接下载最新版本的JDK。<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a><br>目前最新的JDK版本是<code>JDK 8u 60</code> 文件名为： “jdk-8u60-linux-x64.tar.gz”。</p>
<h5 id="步骤-1-2-解压文件"><a href="#步骤-1-2-解压文件" class="headerlink" title="步骤 1.2: 解压文件"></a>步骤 1.2: 解压文件</h5><p>通常，正在下载的文件存储在下载文件夹中，使用下面的命令进行文件校验和解压。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ cd /go/to/download/path$ tar -zxf jdk-8u60-linux-x64.gz</span>
</pre></td></tr></table></figure>
<h4 id="步骤-1-3-进入Opt文件夹"><a href="#步骤-1-3-进入Opt文件夹" class="headerlink" title="步骤 1.3: 进入Opt文件夹"></a>步骤 1.3: 进入Opt文件夹</h4><p>为了让Java对所有人都是可用的，需要将解压后的内容移动到<code>/usr/local/java</code>文件夹下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ supassword: (type password of root user) $ mkdir /opt/jdk$ mv jdk-1.8.0_60 /opt/jdk/</span>
</pre></td></tr></table></figure>
<h4 id="步骤-1-4-设置path环境变量"><a href="#步骤-1-4-设置path环境变量" class="headerlink" title="步骤 1.4: 设置path环境变量"></a>步骤 1.4: 设置path环境变量</h4><p>可以同步下面的命令设置<code>path</code>和<code>JAVA_HOME</code>环境变量</p>
<pre><code>export JAVA_HOME =/usr/jdk/jdk-1.8.0_60
export PATH=$PATH:$JAVA_HOME/bin
</code></pre><p>是上面的配置生效：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ source ~/.bashr</span>
</pre></td></tr></table></figure>
<h4 id="Step-1-5-Java-Alternatives"><a href="#Step-1-5-Java-Alternatives" class="headerlink" title="Step 1.5: Java Alternatives"></a>Step 1.5: Java Alternatives</h4><p>Use the following command to change Java Alternatives.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">update-alternatives --install /usr/bin/java java /opt/jdk/jdk1.8.0_60/bin/java 100`</span>
</pre></td></tr></table></figure>
<h4 id="Step-1-6-Now-verify-java-using-verification-command-java-version-explained-in-Step-1"><a href="#Step-1-6-Now-verify-java-using-verification-command-java-version-explained-in-Step-1" class="headerlink" title="Step 1.6: Now verify java using verification command (java -version) explained in Step 1."></a>Step 1.6: Now verify java using verification command (java -version) explained in Step 1.</h4><h4 id="步骤-2-ZooKeeper-框架安装"><a href="#步骤-2-ZooKeeper-框架安装" class="headerlink" title="步骤 2: ZooKeeper 框架安装"></a>步骤 2: ZooKeeper 框架安装</h4><h5 id="步骤-2-1-下载-ZooKeeper"><a href="#步骤-2-1-下载-ZooKeeper" class="headerlink" title="步骤 2.1: 下载 ZooKeeper"></a>步骤 2.1: 下载 ZooKeeper</h5><p>通过下面的链接下载zookeeper并安装<br><a href="http://zookeeper.apache.org/releases.html" target="_blank" rel="external">http://zookeeper.apache.org/releases.html</a></p>
<p>到目前为止最新的 ZooKeeper 版本是 3.4.6 (ZooKeeper-3.4.6.tar.gz).</p>
<h5 id="步骤-2-2-解压-tar-文件"><a href="#步骤-2-2-解压-tar-文件" class="headerlink" title="步骤 2.2: 解压 tar 文件"></a>步骤 2.2: 解压 tar 文件</h5><p>通过下面的命令解压文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ cd opt/$ tar  -zxf  zookeeper-3.4.6.tar.gz$ cd zookeeper-3.4.6$ mkdir data</span>
</pre></td></tr></table></figure>
<h5 id="步骤-2-3-创建配置文件"><a href="#步骤-2-3-创建配置文件" class="headerlink" title="步骤 2.3: 创建配置文件"></a>步骤 2.3: 创建配置文件</h5><p>用<code>vi</code>打开名为<code>conf/zoo.cfg</code>的配置文件并在配置文件中添加如下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ vi conf/zoo.cfgtickTime=2000dataDir=/path/to/zookeeper/dataclientPort=2181initLimit=5syncLimit=2</span>
</pre></td></tr></table></figure>
<p>完成配置文件的创建后你就可以启动Zookeeper服务器了。</p>
<h5 id="步骤-2-4-启动-ZooKeeper-Server"><a href="#步骤-2-4-启动-ZooKeeper-Server" class="headerlink" title="步骤 2.4: 启动 ZooKeeper Server"></a>步骤 2.4: 启动 ZooKeeper Server</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ bin/zkServer.sh start</span>
</pre></td></tr></table></figure>
<p>在该命令执行后你可以看到下面的反馈信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ JMX enabled by default$ Using config: /Users/../zookeeper-3.4.6/bin/../conf/zoo.cfg $ Starting zookeeper ... STARTED</span>
</pre></td></tr></table></figure>
<h5 id="步骤-2-5-启动命令行工具"><a href="#步骤-2-5-启动命令行工具" class="headerlink" title="步骤 2.5: 启动命令行工具"></a>步骤 2.5: 启动命令行工具</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">$ bin/zkCli.sh</span>
</pre></td></tr></table></figure>
<p>在输入上面的命令后，你会连接到Zookeeper服务器并得到下面的响应信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">Connecting to localhost:2181................................................Welcome to ZooKeeper!................................WATCHER::WatchedEvent state:SyncConnected type: None path:null [zk: localhost:2181(CONNECTED) 0]</span>
</pre></td></tr></table></figure></p>
<h5 id="步骤-2-6-停止-Zookeeper-Server"><a href="#步骤-2-6-停止-Zookeeper-Server" class="headerlink" title="步骤 2.6: 停止 Zookeeper Server"></a>步骤 2.6: 停止 Zookeeper Server</h5><p>在连接到Zookeeper并执行了一些操作后你可以通过下面的命令来停止Zookeeper。</p>
<pre><code>$ bin/zkServer.sh stop
</code></pre><p>现在你已经在你的机器上成功安装了Java和Zookeeper，接下来我们将安装Kafka。</p>
<h4 id="步骤-3-安装Apache-Kafka"><a href="#步骤-3-安装Apache-Kafka" class="headerlink" title="步骤 3: 安装Apache Kafka"></a>步骤 3: 安装Apache Kafka</h4><h5 id="步骤-3-1-下载-Kafka"><a href="#步骤-3-1-下载-Kafka" class="headerlink" title="步骤 3.1: 下载 Kafka"></a>步骤 3.1: 下载 Kafka</h5><p>点击下面的链接来下载kafka:<br><a href="https://www.apache.org/dyn/closer.cgi?path=/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz" target="_blank" rel="external">https://www.apache.org/dyn/closer.cgi?path=/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz</a></p>
<h5 id="步骤-3-2-解压tar文件"><a href="#步骤-3-2-解压tar文件" class="headerlink" title="步骤 3.2: 解压tar文件"></a>步骤 3.2: 解压tar文件</h5><p>使用下面的命令解压下载的文件：</p>
<pre><code>$ cd opt/
$ tar  -zxf kafka_2.11.0.9.0.0 tar.gz
$ cd kafka_2.11.0.9.0.0
</code></pre><h5 id="Step-3-3-启动-Server"><a href="#Step-3-3-启动-Server" class="headerlink" title="Step 3.3: 启动 Server"></a>Step 3.3: 启动 Server</h5><p>你可以通过下面的命令启动Server:</p>
<pre><code>$ bin/kafka-server-start.sh config/server.properties
</code></pre><p>在服务启动后，你回在屏幕上看到如下的信息：</p>
<pre><code>$ bin/kafka-server-start.sh config/server.properties
[2016-01-02 15:37:30,410] INFO KafkaConfig values:
request.timeout.ms = 30000
log.roll.hours = 168 inter.broker.protocol.version = 0.9.0.X    log.preallocate = false security.inter.broker.protocol = PLAINTEXT
   ....................................................
   ....................................................
</code></pre><h5 id="步骤-4-停止-the-Server"><a href="#步骤-4-停止-the-Server" class="headerlink" title="步骤 4: 停止 the Server"></a>步骤 4: 停止 the Server</h5><p>在执行完所有的操作后你可以通过下面的命令停止服务：</p>
<pre><code>$ bin/kafka-server-stop.sh config/server.properties
</code></pre><p>目前我们已经完成了Kafka的安装，接下来我们来看看kafka的基本操作。</p>
<h3 id="Kafka基本操作"><a href="#Kafka基本操作" class="headerlink" title="Kafka基本操作"></a>Kafka基本操作</h3><p>首先让我们实现单个结点的Broker，随后看看如何搭建多结点的Kafka集群。</p>
<p>希望你已经安装了Java，Zookeeper, Kafka。在搭建Kafka集群前你应该先启动ZooKeeper ，因为Kafka集群依赖ZooKeeper。</p>
<h4 id="Start-ZooKeeper"><a href="#Start-ZooKeeper" class="headerlink" title="Start ZooKeeper"></a>Start ZooKeeper</h4><p>打开一个新的终端并输入下面的命令：</p>
<pre><code>bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre><p>输入下面的命令启动Kafka Server:</p>
<pre><code>bin/kafka-server-start.sh config/server.properties
</code></pre><p>在启动Kafka Broker后，在启动Zookeeper的终端窗口输入<code>jps</code>命令你会看到如下的输出：</p>
<pre><code>821 QuorumPeerMain
928 Kafka
931 Jps    
</code></pre><p>现在你应该可以在终端看到两个守护进程，QuorumPeerMain 是 ZooKeeper 另一个是Kafka。</p>
<h4 id="单个Broker结点配置"><a href="#单个Broker结点配置" class="headerlink" title="单个Broker结点配置"></a>单个Broker结点配置</h4><p>在这个配置中，你有一个ZooKeeper和一个Broker实例。 以下是配置步骤：<br><em>创建Kafka主题</em>：Kafka提供了一个名为“kafka-topics.sh”的命令行实用程序来在服务器上创建主题。 打开新终端并键入以下示例。</p>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic Hello-Kafka</span>
</pre></td></tr></table></figure>
<p>我们刚才创建了一个名为<code>Hello-Kafka</code>,一个分区和一个副本的topic。上面命令的输出信息如下：</p>
<p><em>输出</em>: <code>Created topic “Hello-Kafka”</code></p>
<h5 id="List-of-Topics"><a href="#List-of-Topics" class="headerlink" title="List of Topics"></a>List of Topics</h5><p>为了获取Kafka服务器上的topic列表，你可以使用下面的命令：</p>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --list --zookeeper localhost:2181</span>
</pre></td></tr></table></figure>
<p><em>输出</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">Hello-Kafka</span>
</pre></td></tr></table></figure>
<p>由于我们只创建了一个名为<code>Hello-Kafka</code>的topic，则只会有上面的输出。如果你创建了很多topic则你回获取更过topic名称列表。</p>
<h5 id="启动Producer发送消息"><a href="#启动Producer发送消息" class="headerlink" title="启动Producer发送消息"></a>启动Producer发送消息</h5><p><em>语法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic topic-name</span>
</pre></td></tr></table></figure>
<p>从上面的语法我们可以看到有两个重要参数是必须的：<code>Broker-list</code> - 指定我们要发送消息到的Broker列表。在这个例子中我们只有一个Broker。配置文件 <code>server.properties</code>中指定了Broker的端口号，由于我们已经指定了Broker的端口号所以我们可以直接指定；<br><code>topic-name</code>：我们发送消息所属的topic。</p>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic Hello-Kafka</span>
</pre></td></tr></table></figure>
<p>生产者将等待来自标准输入的输入并发布到Kafka集群。 默认情况下，每个新行都作为一条新消息发布，生产者使用配置文件<code>config/producer.properties</code>中指定缺省属性。 现在你可以在终端中键入几行消息，如下所示。</p>
<p><em>输出</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">$ bin/kafka-console-producer.sh --broker-list localhost:9092 --topic Hello-Kafka    [2016-01-16 13:50:45,931] WARN property topic is not valid (kafka.utils.Verifia- bleProperties)HelloMy first message</span>
<span class="line">My second message</span>
</pre></td></tr></table></figure>
<h5 id="启动消费者接收消息"><a href="#启动消费者接收消息" class="headerlink" title="启动消费者接收消息"></a>启动消费者接收消息</h5><p>和生产者类似，消费者默认的属性配置在配置文件<code>config/consumer.properties</code>文件中。开发一个新的终端，输入如下的命令来消费消息：</p>
<p><em>语法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --zookeeper localhost:2181 —topic topic-name --from- beginning</span>
</pre></td></tr></table></figure>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --zookeeper localhost:2181 —topic Hello-Kafka --from- beginning</span>
</pre></td></tr></table></figure>
<p><em>输出</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">HelloMy first messageMy second message</span>
</pre></td></tr></table></figure>
<p>最后，你可以从生产者的终端输入消息，并看到它们出现在消费者的终端。 到目前为止，你对具有单个broker的单节点群集有非常好的了解。 现在让我们继续讨论多个代理配置。    </p>
<h4 id="多节点配置"><a href="#多节点配置" class="headerlink" title="多节点配置"></a>多节点配置</h4><p>在搭建多结点Kafka节点集群时首先启动你的Zookeeper服务。</p>
<p><em>创建多节点Kafka Broker</em> – 我们已经拥有了一个Kafka Broker实例，它使用的配置文件是<code>config/server.properties</code>中。 现在我们需要多个代理实例，因此将现有的<code>server.proties</code>文件复制到两个新的配置文件中，并将其重命名为<code>server-one.properties</code>和<code>server-two.properties</code>。 然后编辑这两个新文件并分配以下更改：</p>
<p><em>config/server-one.properties</em></p>
<pre><code># The id of the broker. This must be set to a unique integer for    each broker. 
broker.id=1
# The port the socket server listens on
port=9093
# A comma seperated list of directories under which to store log files 
log.dirs=/tmp/kafka-logs-1
</code></pre><p><em>config/server-two.properties</em></p>
<pre><code># The id of the broker. This must be set to a unique integer for    each broker. 
broker.id=2
# The port the socket server listens on
port=9094
# A comma seperated list of directories under which to store log files 
log.dirs=/tmp/kafka-logs-2
</code></pre><p><em>启动多个Broker</em> – 在完成上面的修改后，打开三个终端来启动三个Broker节点。</p>
<pre><code>Broker1
bin/kafka-server-start.sh config/server.properties
Broker2
bin/kafka-server-start.sh config/server-one.properties
Broker3
bin/kafka-server-start.sh config/server-two.properties
</code></pre><p>现在我们用了三个不同Broker结点在同一个机器上，你可以通过<code>jps</code>命令来校验，你会看到对应的输出。</p>
<h5 id="创建topic"><a href="#创建topic" class="headerlink" title="创建topic"></a>创建topic</h5><p>让我们将副本因子设为3，因为我们拥有三个Broker实例，如果你拥有两个Broker则你设置为2。</p>
<p><em>语法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 1 --topic topic-name</span>
</pre></td></tr></table></figure>
<p><em>例子</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 -partitions 1 --topic Multibrokerapplication</span>
</pre></td></tr></table></figure>
<p><em>输出</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">created topic “Multibrokerapplication”</span>
</pre></td></tr></table></figure>
<p><code>Describe</code> 命令用来检查指定topic的详细信息，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --describe --zookeeper localhost:2181 --topic Multibrokerapplication</span>
</pre></td></tr></table></figure>
<p><em>输出</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">Topic:Multibrokerapplication PartitionCount:1 ReplicationFactor:3 Configs:</span>
<span class="line">Topic:Multibrokerapplication Partition:0 Leader:0 Replicas:0,2,1 Isr:0,2,1</span>
</pre></td></tr></table></figure>
<p>从上面的输出，我们可以得出结论，第一行给出所有分区的摘要，显示topic名称，分区数量和我们已经选择的复制因子。 在第二行中，每个节点将是分区的随机选择的领导者。<br>在我们的例子中，我们看到我们的第一个broker（with broker.id 0）是领导者。 然后Replicas：0,2,1意味着所有的Broker已经完成topic的复制。<code>Isr</code>是<code>in-sync</code>副本的集合。这是副本的子集，当前活着的并和leader保持同步的结点。       </p>
<h5 id="启动生产者发送消息"><a href="#启动生产者发送消息" class="headerlink" title="启动生产者发送消息"></a>启动生产者发送消息</h5><p>这个生产者和前面提到的单个Broder结点中的生产者是一样的。</p>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic Multibrokerapplication</span>
</pre></td></tr></table></figure>
<p><em>输出</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">This is single node-multi broker demoThis is the second message</span>
</pre></td></tr></table></figure>
<h5 id="启动消费者接收消息-1"><a href="#启动消费者接收消息-1" class="headerlink" title="启动消费者接收消息"></a>启动消费者接收消息</h5><p>这个消费者和前面提到的单个Broder结点中的消费者是一样的。</p>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --zookeeper localhost:2181 —topic Multibrokerapplication --from-beginning</span>
</pre></td></tr></table></figure>
<p><em>输出</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-console-consumer.sh --zookeeper localhost:2181 —topic Multibrokerapplication —from-beginningThis is single node-multi broker demoThis is the second message</span>
</pre></td></tr></table></figure>
<h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><p>该本章节我们来讨论Kafka的各种基本操作。</p>
<h5 id="修改Topic"><a href="#修改Topic" class="headerlink" title="修改Topic"></a>修改Topic</h5><p>由于你已经在Kafka集群创建了topic，现在让我们修改已经创建的topic的信息。</p>
<p><em>语法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic topic_name --partitions count</span>
</pre></td></tr></table></figure>
<p><em>例子</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">We have already created a topic “Hello-Kafka” with single partition count and one replica factor. Now using “alter” command we have changed the partition count.    </span>
<span class="line">bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic Hello-kafka --parti- tions 2</span>
</pre></td></tr></table></figure>
<p><em>输出</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">WARNING: If partitions are increased for a topic that has a key, the partition logic or ordering of the messages will be affected Adding partitions succeeded!</span>
</pre></td></tr></table></figure>
<h5 id="删除topic"><a href="#删除topic" class="headerlink" title="删除topic"></a>删除topic</h5><p>可以通过下面的语法删除topic</p>
<p><em>语法</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:2181 --delete --topic topic_name</span>
</pre></td></tr></table></figure>
<p><em>例子</em>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:2181 --delete --topic Hello-kafka</span>
</pre></td></tr></table></figure>
<p><em>输出</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">Topic Hello-kafka marked for deletion</span>
</pre></td></tr></table></figure>
<p><strong>注意</strong>： 该操作只有在Broker的配置文件中设置了选项<code>delete.topic.enable=true</code>才可以。</p>
<h3 id="Kafka–简单生产者示例"><a href="#Kafka–简单生产者示例" class="headerlink" title="Kafka–简单生产者示例"></a>Kafka–简单生产者示例</h3><p>让我们使用Java客户端创建一个用于发布和使用消息的应用程序。 Kafka生产者客户端包括以下API。</p>
<h4 id="KafkaProducer-API"><a href="#KafkaProducer-API" class="headerlink" title="KafkaProducer API"></a>KafkaProducer API</h4><p>让我们了解本节中最重要的一组Kafka生产者API。 KafkaProducer API的中心部分是“KafkaProducer”类。 KafkaProducer类提供了一个选项，用于将构造函数中的Kafka代理连接到以下方法。</p>
<ul>
<li>KafkaProducer 类提供了<code>send</code>方法来异步发送消息，<code>send</code>方法的签名如下：<pre><code>producer.send(new ProducerRecord&lt;byte[],byte[]&gt;(topic, partition, key1, value1) , callback);
</code></pre><ul>
<li>ProducerRecord - 生产者管理等待发送的记录的缓冲器。􏰂 </li>
<li>Callback-一个用户提供的回调对象，当消息被Broker确认后会回调该对象的回调方法。如果为null则意味着没有回调。</li>
</ul>
</li>
<li>KafkaProducer 类提供了一个<code>flush</code>方法来保证当前所有消息已经被真正的发送到Broker了。该方法的签名是：public void flush()</li>
<li>KafkaProducer 类提供了一个<code>partitionFor</code>方法， 用来获取指定topic的分区原信息。这个可以被用来客户端自定义分区。该方法的签名如下：<code>public partitionsFor(string topic)</code></li>
<li>KafkaProducer 类提供了一个<code>metrics</code>方法，该方法返回一个由生产者维护的metrics信息的Map。该方法的签名是： <code>public Map metrics()</code>。</li>
<li>public void close() – KafkaProducer 类提供的<code>close</code>方法会等所有的消息发送完成后关闭Producer。</li>
</ul>
<h4 id="Producer-API"><a href="#Producer-API" class="headerlink" title="Producer API"></a>Producer API</h4><p>生产者API的中心部分是“生产者”类。 生产者类提供了一个选项，通过以下方法在其构造函数中连接Kafka代理。</p>
<h5 id="The-Producer-Class"><a href="#The-Producer-Class" class="headerlink" title="The Producer Class"></a>The Producer Class</h5><p>生产者类提供send方法，使用以下签名向单个或多个主题发送消息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(KeyedMessage&lt;k,v&gt; message)</span><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(List&lt;KeyedMessage&lt;k,v&gt;&gt; messages)</span> </span>
<span class="line">Properties prop </span>= <span class="keyword">new</span> Properties();prop.put(producer.type,”async”)ProducerConfig config = <span class="keyword">new</span> ProducerConfig(prop);</span>
</pre></td></tr></table></figure>
<p>有两种类型的生产者-同步和异步。相同的API配置也适用于“同步”生产者。 它们之间的区别是同步生产者直接发送消息，但是在后台发送消息。 当您想要更高的吞吐量时，异步生成器是首选。 在以前的版本，如0.8，一个异步生产者没有回调send（）注册错误处理程序。 这仅在当前版本0.9中可用。</p>
<pre><code>public void close()
</code></pre><p>Producer 类提供的<code>close</code>方法可以关闭生产者和Broker之间的连接池。</p>
<h5 id="Configuration-Settings"><a href="#Configuration-Settings" class="headerlink" title="Configuration Settings"></a>Configuration Settings</h5><p>下表中列出了Producer API的主要配置设置，以便更好地理解：</p>
<table>
<thead>
<tr>
<th>配置项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>client.id</td>
<td>标志生产者应用程序</td>
</tr>
<tr>
<td>producer.type</td>
<td>可以是 sync 或 async</td>
</tr>
<tr>
<td>acks</td>
<td>这个配置可以设定发送消息后是否需要Broker端返回确认，0: 不需要进行确认，速度最快。存在丢失数据的风险。1: 仅需要Leader进行确认，不需要ISR进行确认。是一种效率和安全折中的方式。all: 需要ISR中所有的Replica给予接收确认，速度最慢，安全性最高，但是由于ISR可能会缩小到仅包含一个Replica，所以设置参数为all并不能一定避免数据丢失。</td>
</tr>
<tr>
<td>retries</td>
<td>如果生产者发送消息时被后会通过该选择指定的值进行重试</td>
</tr>
<tr>
<td>bootstrap.servers</td>
<td>生产者启动的Broker结点列表</td>
</tr>
<tr>
<td>linger.ms</td>
<td>Producer默认会把两次发送时间间隔内收集到的所有Requests进行一次聚合然后再发送，以此提高吞吐量，而linger.ms则更进一步，这个参数为每次发送增加一些delay，以此来聚合更多的Message</td>
</tr>
<tr>
<td>key.serializer</td>
<td>消息 Key 值序列化接口</td>
</tr>
<tr>
<td>value.serializer</td>
<td>消息 value 的序列化接口</td>
</tr>
<tr>
<td>batch.size</td>
<td>Producer会尝试去把发往同一个Partition的多个Requests进行合并，batch.size指明了一次Batch合并后Requests总大小的上限。如果这个值设置的太小，可能会导致所有的Request都不进行Batch</td>
</tr>
<tr>
<td>buffer.memory</td>
<td>在Producer端用来存放尚未发送出去的Message的缓冲区大小。缓冲区满了之后可以选择阻塞发送或抛出异常，由block.on.buffer.full的配置来决定</td>
</tr>
</tbody>
</table>
<h4 id="ProducerRecord-API"><a href="#ProducerRecord-API" class="headerlink" title="ProducerRecord API"></a>ProducerRecord API</h4><p>ProducerRecord 是一个键值对，用来封装发送到Kafka集群消息。构造函数的签名如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ProducerRecord</span> <span class="params">(string topic, <span class="keyword">int</span> partition, k key, v value)</span></span></span>
</pre></td></tr></table></figure>
<ul>
<li>Topic - 用户定义的Topic名称。</li>
<li>Partition - 发送到那个Partition</li>
<li>Key - 消息的Key值</li>
<li>Value - 消息体数据</li>
</ul>
<p>没有指定Partition的构造函数签名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ProducerRecord</span> <span class="params">(string topic, k key, v value)</span>*</span></span>
</pre></td></tr></table></figure>
<ul>
<li>Topic - 用户定义的Topic名称</li>
<li>Key - 消息的Key值</li>
<li>Value - 消息体数据</li>
</ul>
<p>只有topic名称和消息体的构造函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ProducerRecord</span> <span class="params">(string topic, v value)</span></span></span>
</pre></td></tr></table></figure>
<ul>
<li>Topic - 用户定义的Topic名称</li>
<li>Value - 消息体数据</li>
</ul>
<p>ProducerRecord 类提供的方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public string topic()</td>
<td>Topic will append to the record.</td>
</tr>
<tr>
<td>public K key()</td>
<td>Key that will be included in the record. If no such key, null will be re- turned here.</td>
</tr>
<tr>
<td>public V value()</td>
<td>Record contents.</td>
</tr>
<tr>
<td>partition()</td>
<td>Partition count for the record</td>
</tr>
</tbody>
</table>
<h4 id="SimpleProducer-应用程序"><a href="#SimpleProducer-应用程序" class="headerlink" title="SimpleProducer 应用程序"></a>SimpleProducer 应用程序</h4><p>在创建应用程序前，首先需要启动ZooKeeper和Kafka Broker并通过创建topic的命令创建指定的Topic。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
<span class="line">35</span>
<span class="line">36</span>
<span class="line">37</span>
<span class="line">38</span>
</pre></td><td class="code"><pre><span class="line">import java.util.Properties;</span>
<span class="line">//import util.properties packages</span>
<span class="line">import org.apache.kafka.clients.producer.Producer; //import simple producer packages</span>
<span class="line">import org.apache.kafka.clients.producer.KafkaProducer; //import KafkaProducer packages</span>
<span class="line">import org.apache.kafka.clients.producer.ProducerRecord; //import ProducerRecord packages</span>
<span class="line">public class SimpleProducer &#123;</span>
<span class="line">    //Create java class named “SimpleProducer”</span>
<span class="line">    public static void main(String[] args) throws Exception &#123;</span>
<span class="line">        // Check arguments length value</span>
<span class="line">        if(args.length == 0) &#123;</span>
<span class="line">            System.out.println("Enter topic name”);</span>
<span class="line">            return;</span>
<span class="line">        &#125;</span>
<span class="line">        String topicName = args[0].toString();</span>
<span class="line">        //Assign topicName to string variable</span>
<span class="line">        Properties props = new Properties();</span>
<span class="line">        // create instance for properties to access producer configs</span>
<span class="line">        props.put("bootstrap.servers", "localhost:9092"); //Assign localhost id</span>
<span class="line">        props.put("acks", "all");</span>
<span class="line">        //Set acknowledgements for producer requests.</span>
<span class="line">        props.put("retries", 0);</span>
<span class="line">        //If the request fails, the producer can automatically retry,</span>
<span class="line">        props.put("batch.size", 16384);</span>
<span class="line">        //Specify buffer size in config</span>
<span class="line">        props.put("linger.ms", 1);</span>
<span class="line">        //Reduce the no of requests less than 0</span>
<span class="line">        props.put("buffer.memory", 33554432);</span>
<span class="line">        //The buffer.memory controls the total amount of memory available to the producer for buffering.</span>
<span class="line">        props.put("key.serializer", "org.apache.kafka.common.serializa- tion.StringSerializer");</span>
<span class="line">        props.put("value.serializer", "org.apache.kafka.common.serializa-tion.StringSerializer");</span>
<span class="line">        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;String,String&gt;(props);</span>
<span class="line">        for(int i = 0; i &lt; 10; i++)&#123;</span>
<span class="line">            producer.send(new ProducerRecord&lt;String, String&gt;(topicName, Integer.toString(i), Integer.toString(i)));</span>
<span class="line">            System.out.println("Message sent successfully");</span>
<span class="line">        &#125;</span>
<span class="line">        producer.close();</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure>
<p>是用下面的命令编译应用程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">javac -cp “/path/to/kafka/kafka_2.11-<span class="number">0.9</span>.0.0/lib<span class="comment">/*” *.java</span></span>
</pre></td></tr></table></figure>
<p>使用下面的命令执行应用程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">java -cp “/path/to/kafka/kafka_2.11-<span class="number">0.9</span>.0.0/lib<span class="comment">/*”:. SimpleProducer &lt;topic-name&gt;</span></span>
</pre></td></tr></table></figure>
<p>输出：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
</pre></td><td class="code"><pre><span class="line">Message sent successfullyTo check the above output open <span class="keyword">new</span> terminal and type Consumer CLI command to receive messages.&gt;&gt; bin/kafka-console-consumer.sh --zookeeper localhost:<span class="number">2181</span> —topic &lt;topic-name&gt; — from-beginning<span class="number">1</span> </span>
<span class="line"><span class="number">2</span> </span>
<span class="line"><span class="number">3</span> </span>
<span class="line"><span class="number">4</span> </span>
<span class="line"><span class="number">5</span> </span>
<span class="line"><span class="number">6</span> </span>
<span class="line"><span class="number">7</span> </span>
<span class="line"><span class="number">8</span> </span>
<span class="line"><span class="number">9</span> </span>
<span class="line"><span class="number">10</span></span>
</pre></td></tr></table></figure></p>
<h4 id="简单的-Consumer-例子"><a href="#简单的-Consumer-例子" class="headerlink" title="简单的 Consumer 例子"></a>简单的 Consumer 例子</h4><p>到目前为止，我们已经创建了一个发送消息到Kafka集群的生产者。 现在让我们创建一个消费者来消费Kafka集群中的消息。 KafkaConsumer API用于消费来自Kafka集群的消息。 KafkaConsumer类的构造函数定义如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">KafkaConsumer</span><span class="params">(java.util.Map&lt;java.lang.String,java.lang.Object&gt; configs)</span></span></span>
</pre></td></tr></table></figure>
<p>configs - 一个包含Consumer配置项的Map</p>
<p>KafkaConsumer 类提供下面表格所示的方法列表。</p>
<table>
<thead>
<tr>
<th style="text-align:left">方法签名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">public java.util.Set<topicpartition> assignment()</topicpartition></td>
<td style="text-align:left">获取当前消费者对应的Partition信息</td>
</tr>
<tr>
<td style="text-align:left">public string subscription()</td>
<td style="text-align:left">获取订阅的信息</td>
</tr>
<tr>
<td style="text-align:left">public void subscribe(java.util.List<java.lang.string> topics, ConsumerRebalanceListener listener)</java.lang.string></td>
<td style="text-align:left">批量订阅Topic</td>
</tr>
<tr>
<td style="text-align:left">public void unsubscribe()</td>
<td style="text-align:left">取消指定的订阅</td>
</tr>
<tr>
<td style="text-align:left">public void subscribe(java.util.List<java.lang.string> topics)</java.lang.string></td>
<td style="text-align:left">批量订阅，没有回调</td>
</tr>
<tr>
<td style="text-align:left">public void subscribe(java.util.regex.Pattern pattern,</td>
<td style="text-align:left">按照正则匹配取消订阅</td>
</tr>
<tr>
<td style="text-align:left">public void assign(java.util.List<topicpartition> partitions)</topicpartition></td>
<td style="text-align:left">手动指定消费者消费的分区信息</td>
</tr>
<tr>
<td style="text-align:left">poll()</td>
<td style="text-align:left">获取订阅的topic消息</td>
</tr>
<tr>
<td style="text-align:left">public void commitSync()</td>
<td style="text-align:left">同步更新最后获取的消息的offset信息</td>
</tr>
<tr>
<td style="text-align:left">public void seek(TopicPartition partition, long offset)</td>
<td style="text-align:left">跳转到指定分区的指定偏移位置，下次从该分区的偏移位置获取消息</td>
</tr>
<tr>
<td style="text-align:left">public void resume()</td>
<td style="text-align:left">恢复暂停的分区</td>
</tr>
<tr>
<td style="text-align:left">public void wakeup()</td>
<td style="text-align:left">唤醒消费者</td>
</tr>
</tbody>
</table>
<h5 id="ConsumerRecord-API"><a href="#ConsumerRecord-API" class="headerlink" title="ConsumerRecord API"></a>ConsumerRecord API</h5><p>The ConsumerRecord API is used to receive records from the Kafka cluster. This API consists of a topic name, partition number, from which the record is being received and an offset that points to the record in a Kafka partition. ConsumerRecord class is used to create a consumer record with specific topic name, partition count and <key, value=""> pairs. It has the following signature.</key,></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConsumerRecord</span><span class="params">(string topic,<span class="keyword">int</span> partition, <span class="keyword">long</span> offset,K key, V value)</span></span></span>
</pre></td></tr></table></figure>
<ul>
<li>Topic - The topic name for consumer record received from the Kafka cluster.</li>
<li>􏰁Partition - Partition for the topic.</li>
<li>􏰁Key - The key of the record, if no key exists null will be returned.</li>
<li>Value - Record contents.</li>
</ul>
<h5 id="ConsumerRecords-API"><a href="#ConsumerRecords-API" class="headerlink" title="ConsumerRecords API"></a>ConsumerRecords API</h5><p>ConsumerRecords API acts as a container for ConsumerRecord. This API is used to keep the list of ConsumerRecord per partition for a particular topic. Its Constructor is defined below.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ConsumerRecords</span><span class="params">(java.util.Map&lt;TopicPartition,java.util.List&lt;Consumer- Record&lt;K,V&gt;&gt;&gt; records)</span></span></span>
</pre></td></tr></table></figure>
<ul>
<li>TopicPartition - Return a map of partition for a particular topic.</li>
<li>Records - Return list of ConsumerRecord.</li>
</ul>
<p>ConsumerRecords class has the following methods defined.</p>
<table>
<thead>
<tr>
<th>方法签名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public int count()</td>
<td>The number of records for all the topics.</td>
</tr>
<tr>
<td>public Set partitions()</td>
<td>The set of partitions with data in this record set (if no data was returned then the set is empty).</td>
</tr>
<tr>
<td>public Iterator iterator()</td>
<td>Iterator enables you to cycle through a collection, obtaining or re- moving elements.</td>
</tr>
<tr>
<td>public List records()</td>
<td>Get list of records for the given partition.</td>
</tr>
</tbody>
</table>
<h5 id="Configuration-Settings-1"><a href="#Configuration-Settings-1" class="headerlink" title="Configuration Settings"></a>Configuration Settings</h5><p>The configuration settings for the Consumer client API main configuration settings are listed below:</p>
<table>
<thead>
<tr>
<th>配置项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bootstrap.servers</td>
<td>Bootstrapping list of brokers.</td>
</tr>
<tr>
<td>group.id</td>
<td>Assigns an individual consumer to a group.</td>
</tr>
<tr>
<td>enable.auto.commit</td>
<td>enable.auto.commitEnable auto commit for offsets if the value is true, otherwise not committed.</td>
</tr>
<tr>
<td>auto.commit.interval.ms</td>
<td>Return how often updated consumed offsets are written to ZooKeeper.</td>
</tr>
<tr>
<td>session.timeout.ms</td>
<td>Indicates how many milliseconds Kafka will wait for the ZooKeeper to respond to a request (read or write) before giving up and continuing to consume messages.</td>
</tr>
</tbody>
</table>
<h5 id="SimpleConsumer-Application"><a href="#SimpleConsumer-Application" class="headerlink" title="SimpleConsumer Application"></a>SimpleConsumer Application</h5><p>The producer application steps remain the same here. First, start your ZooKeeper and Kafka broker. Then create a “SimpleConsumer” application with the java class named “SimpleCon- sumer.java” and type the following code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
<span class="line">35</span>
<span class="line">36</span>
<span class="line">37</span>
<span class="line">38</span>
<span class="line">39</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.leokongwq.kafka;</span>
<span class="line"></span>
<span class="line"><span class="keyword">import</span> java.util.Properties;</span>
<span class="line"><span class="keyword">import</span> java.util.Arrays;</span>
<span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span>
<span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span>
<span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span>
<span class="line"></span>
<span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleConsumer</span> </span>&#123;</span>
<span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span>
<span class="line">        <span class="keyword">if</span>(args.length == <span class="number">0</span>)&#123;</span>
<span class="line">            System.out.println(<span class="string">"Enter topic name"</span>);</span>
<span class="line">            <span class="keyword">return</span>;</span>
<span class="line">        &#125;</span>
<span class="line">        String topicName = args[<span class="number">0</span>].toString();</span>
<span class="line">        Properties props = <span class="keyword">new</span> Properties();</span>
<span class="line">        <span class="comment">//Kafka consumer configuration settings</span></span>
<span class="line">        props.put(<span class="string">"bootstrap.servers"</span>, <span class="string">"localhost:9092"</span>);</span>
<span class="line">        props.put(<span class="string">"group.id"</span>, <span class="string">"test"</span>);</span>
<span class="line">        props.put(<span class="string">"enable.auto.commit"</span>, <span class="string">"true"</span>);</span>
<span class="line">        props.put(<span class="string">"auto.commit.interval.ms"</span>, <span class="string">"1000"</span>);</span>
<span class="line">        props.put(<span class="string">"session.timeout.ms"</span>, <span class="string">"30000"</span>);</span>
<span class="line">        props.put(<span class="string">"key.deserializer"</span>, <span class="string">"org.apache.kafka.common.serialization.StringDeserializer"</span>);</span>
<span class="line">        props.put(<span class="string">"value.deserializer"</span>, <span class="string">"org.apache.kafka.common.serialization.StringDeserializer"</span>);</span>
<span class="line"></span>
<span class="line">        KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> KafkaConsumer&lt;String, String&gt;(props);</span>
<span class="line">        consumer.subscribe(Arrays.asList(topicName));</span>
<span class="line">        <span class="comment">//KafkaConsumer subscribes list of topics here. System.out.println("Subscribed to topic " + topicName); //print the</span></span>
<span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span>
<span class="line"></span>
<span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span>
<span class="line">            ConsumerRecords&lt;String, String&gt; records = consumer.poll(<span class="number">100</span>);</span>
<span class="line">            <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records)&#123;</span>
<span class="line">                <span class="comment">// print the offset,key and value for the consumer records.</span></span>
<span class="line">                System.out.printf(<span class="string">"offset = %d, key = %s, value = %s\n"</span>, record.offset(), record.key(), record.value());</span>
<span class="line">            &#125;</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure>
<p>编译：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">javac -cp “/path/to/kafka/kafka_2.11-<span class="number">0.9</span>.0.0/lib<span class="comment">/*” *.java</span></span>
</pre></td></tr></table></figure>
<p>运行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">java -cp “/path/to/kafka/kafka_2.11-<span class="number">0.9</span>.0.0/lib<span class="comment">/*”:. SimpleConsumer &lt;topic-name&gt;</span></span>
</pre></td></tr></table></figure>
<p><em>Input</em> – Open the producer CLI and send some messages to the topic. You can put the smple input as ‘Hello Consumer’.<br><em>Output</em> – Following will be the output.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line">Subscribed to topic Hello-Kafkaoffset = 3, key = null, value = Hello Consumer</span>
</pre></td></tr></table></figure>
<h3 id="Kafka–ConsumerGroupExample"><a href="#Kafka–ConsumerGroupExample" class="headerlink" title="Kafka–ConsumerGroupExample"></a>Kafka–ConsumerGroupExample</h3>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/02/06/mq-kafka-tutorial.html">kafka入门教程</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">kongwenqiang</a></p>
        <p><span>发布时间:</span>2017-02-06, 22:25:30</p>
        <p><span>最后更新:</span>2018-02-06, 19:32:05</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/02/06/mq-kafka-tutorial.html" title="kafka入门教程">https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial.html</a>
            <span class="copy-path" data-clipboard-text="原文: https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial.html　　作者: kongwenqiang" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/02/07/mq-kafka-blogs.html">
                    kafka资料汇总
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/02/06/microservice-links.html">
                    微服务资料汇总
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#kafka背景"><span class="toc-number">1.</span> <span class="toc-text">kafka背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kafka介绍"><span class="toc-number">2.</span> <span class="toc-text">kafka介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是消息系统？"><span class="toc-number">2.1.</span> <span class="toc-text">什么是消息系统？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#点对点消息系统"><span class="toc-number">2.1.1.</span> <span class="toc-text">点对点消息系统</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#发布-订阅消息系统"><span class="toc-number">2.1.2.</span> <span class="toc-text">发布-订阅消息系统</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kafka是什么？"><span class="toc-number">2.2.</span> <span class="toc-text">kafka是什么？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#优点"><span class="toc-number">2.2.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#用例"><span class="toc-number">2.2.2.</span> <span class="toc-text">用例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#need-for-Kafka"><span class="toc-number">2.3.</span> <span class="toc-text">need for Kafka</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka基础概念"><span class="toc-number">3.</span> <span class="toc-text">Kafka基础概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka集群架构"><span class="toc-number">4.</span> <span class="toc-text">Kafka集群架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka工作流程"><span class="toc-number">5.</span> <span class="toc-text">Kafka工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pub-Sub-消息模型工作流程"><span class="toc-number">5.1.</span> <span class="toc-text">Pub-Sub 消息模型工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#队列消息模型工作流程-amp-Consumer-Group"><span class="toc-number">5.2.</span> <span class="toc-text">队列消息模型工作流程 & Consumer Group</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZooKeeper的角色"><span class="toc-number">5.3.</span> <span class="toc-text">ZooKeeper的角色</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka安装步骤"><span class="toc-number">6.</span> <span class="toc-text">Kafka安装步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤-1-校验Java是否安装"><span class="toc-number">6.1.</span> <span class="toc-text">步骤 1: 校验Java是否安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-1-1-下载-JDK"><span class="toc-number">6.1.1.</span> <span class="toc-text">步骤 1.1: 下载 JDK</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-1-2-解压文件"><span class="toc-number">6.1.2.</span> <span class="toc-text">步骤 1.2: 解压文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤-1-3-进入Opt文件夹"><span class="toc-number">6.2.</span> <span class="toc-text">步骤 1.3: 进入Opt文件夹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤-1-4-设置path环境变量"><span class="toc-number">6.3.</span> <span class="toc-text">步骤 1.4: 设置path环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-1-5-Java-Alternatives"><span class="toc-number">6.4.</span> <span class="toc-text">Step 1.5: Java Alternatives</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-1-6-Now-verify-java-using-verification-command-java-version-explained-in-Step-1"><span class="toc-number">6.5.</span> <span class="toc-text">Step 1.6: Now verify java using verification command (java -version) explained in Step 1.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤-2-ZooKeeper-框架安装"><span class="toc-number">6.6.</span> <span class="toc-text">步骤 2: ZooKeeper 框架安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-1-下载-ZooKeeper"><span class="toc-number">6.6.1.</span> <span class="toc-text">步骤 2.1: 下载 ZooKeeper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-2-解压-tar-文件"><span class="toc-number">6.6.2.</span> <span class="toc-text">步骤 2.2: 解压 tar 文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-3-创建配置文件"><span class="toc-number">6.6.3.</span> <span class="toc-text">步骤 2.3: 创建配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-4-启动-ZooKeeper-Server"><span class="toc-number">6.6.4.</span> <span class="toc-text">步骤 2.4: 启动 ZooKeeper Server</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-5-启动命令行工具"><span class="toc-number">6.6.5.</span> <span class="toc-text">步骤 2.5: 启动命令行工具</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-2-6-停止-Zookeeper-Server"><span class="toc-number">6.6.6.</span> <span class="toc-text">步骤 2.6: 停止 Zookeeper Server</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#步骤-3-安装Apache-Kafka"><span class="toc-number">6.7.</span> <span class="toc-text">步骤 3: 安装Apache Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-3-1-下载-Kafka"><span class="toc-number">6.7.1.</span> <span class="toc-text">步骤 3.1: 下载 Kafka</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-3-2-解压tar文件"><span class="toc-number">6.7.2.</span> <span class="toc-text">步骤 3.2: 解压tar文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Step-3-3-启动-Server"><span class="toc-number">6.7.3.</span> <span class="toc-text">Step 3.3: 启动 Server</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#步骤-4-停止-the-Server"><span class="toc-number">6.7.4.</span> <span class="toc-text">步骤 4: 停止 the Server</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka基本操作"><span class="toc-number">7.</span> <span class="toc-text">Kafka基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Start-ZooKeeper"><span class="toc-number">7.1.</span> <span class="toc-text">Start ZooKeeper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单个Broker结点配置"><span class="toc-number">7.2.</span> <span class="toc-text">单个Broker结点配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#List-of-Topics"><span class="toc-number">7.2.1.</span> <span class="toc-text">List of Topics</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#启动Producer发送消息"><span class="toc-number">7.2.2.</span> <span class="toc-text">启动Producer发送消息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#启动消费者接收消息"><span class="toc-number">7.2.3.</span> <span class="toc-text">启动消费者接收消息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多节点配置"><span class="toc-number">7.3.</span> <span class="toc-text">多节点配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#创建topic"><span class="toc-number">7.3.1.</span> <span class="toc-text">创建topic</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#启动生产者发送消息"><span class="toc-number">7.3.2.</span> <span class="toc-text">启动生产者发送消息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#启动消费者接收消息-1"><span class="toc-number">7.3.3.</span> <span class="toc-text">启动消费者接收消息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本操作"><span class="toc-number">7.4.</span> <span class="toc-text">基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#修改Topic"><span class="toc-number">7.4.1.</span> <span class="toc-text">修改Topic</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除topic"><span class="toc-number">7.4.2.</span> <span class="toc-text">删除topic</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka–简单生产者示例"><span class="toc-number">8.</span> <span class="toc-text">Kafka–简单生产者示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#KafkaProducer-API"><span class="toc-number">8.1.</span> <span class="toc-text">KafkaProducer API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Producer-API"><span class="toc-number">8.2.</span> <span class="toc-text">Producer API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#The-Producer-Class"><span class="toc-number">8.2.1.</span> <span class="toc-text">The Producer Class</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Configuration-Settings"><span class="toc-number">8.2.2.</span> <span class="toc-text">Configuration Settings</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ProducerRecord-API"><span class="toc-number">8.3.</span> <span class="toc-text">ProducerRecord API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleProducer-应用程序"><span class="toc-number">8.4.</span> <span class="toc-text">SimpleProducer 应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#简单的-Consumer-例子"><span class="toc-number">8.5.</span> <span class="toc-text">简单的 Consumer 例子</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ConsumerRecord-API"><span class="toc-number">8.5.1.</span> <span class="toc-text">ConsumerRecord API</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ConsumerRecords-API"><span class="toc-number">8.5.2.</span> <span class="toc-text">ConsumerRecords API</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Configuration-Settings-1"><span class="toc-number">8.5.3.</span> <span class="toc-text">Configuration Settings</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SimpleConsumer-Application"><span class="toc-number">8.5.4.</span> <span class="toc-text">SimpleConsumer Application</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kafka–ConsumerGroupExample"><span class="toc-number">9.</span> <span class="toc-text">Kafka–ConsumerGroupExample</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"kafka入门教程　| 戒修-沉迷技术的小沙弥　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js'];
        </script>
    

    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'https://leokongwq.github.io/2017/02/06/mq-kafka-tutorial.html';
            this.page.identifier = '2017/02/06/mq-kafka-tutorial.html';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//leokongwq.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

</section>


    


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/02/07/mq-kafka-blogs.html" title="上一篇: kafka资料汇总">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/02/06/microservice-links.html" title="下一篇: 微服务资料汇总">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/22/json-web-token.html">JWT简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/19/activemq-redelivery-policy-config.html">ActiveMQ 消息重发策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/15/rest-version.html">REST API 版本化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/15/spring-boot-deploy.html">SpringBoot应用部署模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/12/spring-rest-controller.html">基于Spring构建RESTFUL风格的controller</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/12/spring-cache.html">spring对缓存的支持及相关注解说明</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/computer-booting-linux.html">linux系统如何启动</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/21/computer-booting.html">计算机是如何启动的</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/06/spring-extension-point-autoconfig-summary.html">spring扩展点及springboot自动配置总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/12/openresy-lua-image-server.html">基于Openresy的图片服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/06/linux-file-system-schedule.html">Linux文件系统调用算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/31/openresty-health-check-dynamic-up-down.html">基于openresty的后端应用健康检查-动态上下线</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/30/tcp-state-transfer-diagram.html">TCP状态转化总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/27/openresty-dynamic-upstream.html">openresty动态upstream实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/19/distribute-lock-some-way.html">分布式锁的几种实现方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/19/distribute-system-consistent.html">分布式系统一致性</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/10/kotlin-coroutine-learn.html">kotlin之coroutine学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/10/mac-autostart.html">mac上禁止jenkins自启动</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/01/gossip-intro.html">Gossip算法介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/01/consul-vs-other-software.html">consul和其它软件的比较</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/31/consul-quick-start.html">consul快速启动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/22/computer-science-bus-arbitration.html">CPU总线仲裁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/java-agent-instrumentation.html">java Instrumentation 和 Agent</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/activemq-monitor-hawtio.html">activemq监控之hawtio</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/centos-crond.html">centos下安装crond</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/16/vertx-async-callback-hell.html">vert.x异步回调地狱处理方式总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/vertx-Future.html">vertx-Future</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/06/vertx-cluster.html">vertx集群模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/06/microservices-gateway.html">微服务之网关</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/vertx-command-line-options.html">vertx命令行选项解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/vertx-web-BodyHandler.html">vert.x web开发之BodyHandler</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/02/vertx-web-global-exception.html">vertx中web全局异常处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/01/vertx-vertx-jdbc-client.html">vertx中vertx-jdbc-client使用问题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/01/vertx-jdbc-datasource.html">vertx对jdbc数据源的支持</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/01/vertx-command-run.html">vert.x run 命令解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/30/java8-CompletableFuture-1.html">java8中CompletableFuture解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/22/vertx-http-server-analyze.html">vertx创建http服务器分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/22/http-content-type.html">http协议之content-type</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/22/vertx-Vertx.html">vert.x之Vertx类解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/21/vertx-web-route.html">vert.x web开发之route</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/21/vertx-web-router.html">vert.x web开发之router</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/vertx-cache.html">配置 Vert.x 缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/vertx-Launcher.html">vertx-启动器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/vertx-access-filesystem.html">vertx-访问文件系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/vertx-cluster-lock-counter.html">vertx-集群范围锁-计数器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/vertx-share-data.html">vertx-共享数据</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-tcp.html">vertx编程tcp服务端和客户端</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-http.html">vertx编程http服务端和客户端</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-buffer.html">vertx中的buffer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-json.html">vertx中的json</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-event-bus.html">vertx-事件总线</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-timer.html">vertx-执行周期性/延迟性操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-context.html">vertx-context</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-verticle.html">vertx-verticle介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/vertx-quickstart.html">vert.x入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/10/mysql-tools-code.html">mysql常用工具SQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/06/maven-useful-slices.html">maven使用知识汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/21/mysql-read-only-transaction.html">mysql只读事务解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/30/linux-clean-dns-cache.html">Linux中如何清除DNS缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/28/linux-disk-raid.html">linux磁盘阵列简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/26/linux-centos7-rc-local.html">centos7中rc.local不起作用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/24/understanding-maven-snapshot.html">理解maven中SNAPSHOT版本的作用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/22/python-build-in-chapter-one.html">python内置函数-第一篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/22/linux-kill-parent-and-child-process.html">linux中kill主进程和所有子进程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/why-enum-singleton-are-serialization-safe.html">为什么用枚举实现的单例模式可以防止反序列化？</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/19/computer-how-float-stored.html">浮点数在计算机中是如何存储的？</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/17/mysql-data-types-date-time.html">mysql数据类型-日期&时间</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/16/mysql-data-types-numeric.html">mysql数据类型-数字类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/mysql-data-types-set.html">mysql数据类型-集合</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/mysql-data-types-enum.html">mysql数据类型-枚举类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/12/mysql-data-types-string.html">mysql数据类型-字符串类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/11/python-multiprocessing.html">python多进程简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/07/python-package.html">python包机制简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/python-file-read.html">python文件读写的几种方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/python-multi-thread.html">python中的多线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/java-synchronized-detail.html">深入分析synchronized的实现原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/python-useful-codes.html">Python常用的代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/21/java-baised-locking.html">java中的偏向锁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/06/mysql-deadlock-detection.html">mysql检测和处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/06/mysql-timeout.html">mysql中重要超时处理机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/22/maven-resource-plugin.html">maven-resource-plugin</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/java-Security-Illegal-key-size.html">java-Security-Illegal-key-size</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/linux-find.html">linux find使用总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/spring-MessageConverter.html">spring中HttpMessageConverter详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/mysql-transaction.html">mysql和事务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/11/mysql-locks.html">mysql中的锁</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/09/linux-task-on-boot.html">linux开机启动任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/24/mysql-batch-update-column.html">mysql批量修改列类型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/19/mongodb-enable-query-log.html">mongodb开启查询日志</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/best-practices-for-a-pragmatic-restful-api.html">RESTful API 设计最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/rest-introduce.html">rest架构介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/17/springboot-mongo.html">springboot-mongo</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/16/idea-jvm-options.html">mac下idea虚拟机参数设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/12/linux-tool-traceroute.html">linux工具之traceroute</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/curl-learn.html">curl学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/08/java-enum-abstractMethod.html">java中的枚举是否可以有抽象方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/07/spring-ExceptionResolver.html">spring错误处理之HandlerExceptionResolver</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/07/spring-ErrorPageFilter.html">SpringBoot异常处理之ErrorPageFilter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/05/spring-aop-MethodAnnotation.html">spring中AOP获取方法上的注解信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/02/spring-expandPoint.html">spring扩展点整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/29/maven-dependency-scope.html">maven jar包依赖范围总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/25/java-web-exception.html">java web 开发异常处理总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/18/springboot-tomcat.html">springboot发布到tomcat</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/17/mysql-date-datetime-timestamp.html">mysql中date，datetime，timestamp的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/13/raft-protocol.html">raft协议简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/13/js-cross-domain.html">js跨域解决方案详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/28/java-netty-idleStateHandler.html">netty如何实现心跳检查</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/28/why-oauth2-use-authorization-code.html">为什么在oauth2认证中需要使用授权码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/java-Executors.html">java线程池工具类Executors</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/mq-kafka-producer-partitioner.html">kafka发送消息分区选择策略详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/java-thread-dump.html">java中生成线程堆栈</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/java-Thread-state.html">java线程生命周期和状态</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/java-Thread-join.html">java中线程join方法的用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/java-ThreadPoolExecutor-RejectedExecutionHandler.html">java线程池-RejectedExecutionHandler</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-memorymapped-file-and-io.html">java中内存映射文件和IO</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-difference-between-direct-non-direct-mapped-bytebuffer-nio.html">direct, non-direct, mapped bytebuffer区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-difference-between-stack-and-heap.html">java中栈和堆的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-how-to-create-immutable-class.html">java中如何创建不可变对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-interview-questions-answers-from-last-5-years.html">过去5年Java面试题精选</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/java-why-string-is-immutable-or-final.html">为什么在java中String是不可变或final</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/java-lock-and-condition-example-producer-consumer.html">java中使用锁和条件对象实现生产者-消费者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/java-why-wait-notify-called-in-synchronized-block.html">为什么wait和notify必须在同步方法或同步块中调用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/java-why-java-not-support-multi-inheritances.html">为何java不支持多继承</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/24/mysql-locks-intro.html">mysql锁介绍（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/java-top10-Tricky-questions.html">诡异的java面试题TOP10</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/java-why-wait-notify-and-notifyall-defined-in-object.html">java-为什么wait，notify和notifyall定义在Object中</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/java-notify-notifyall.html">java中notify和notifyall的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/java-xml-parser.html">java中xml解析器介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/smooth-online-offline-service.html">服务节点平滑上下线</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/07/mq-kafka-blogs.html">kafka资料汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/mq-kafka-tutorial.html">kafka入门教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/microservice-links.html">微服务资料汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/ddd-books.html">领域驱动设计书单</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/23/jms-message-order.html">jms-如何保证消息的顺序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/22/golang-param-pass-value-or-point.html">值传递, 指针传递 这是一个问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/21/golang-how-to-write-go-code.html">如何开发GO代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/algo-BigData-summary.html">大数据处理总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/algo-HashSearch.html">algo-HashSearch</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/algo-BlockSearch.html">分块查找</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/algo-BinaryTreeSearch.html">二叉排序树查找</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/algo-BinarySearch.html">二分查找</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/SearchAlgo.html">查找算法总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-HeapSort.html">堆排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-QuickSort.html">快速排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-InsertionSort.html">插入排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-mergesort.html">归并排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-bucketsort.html">桶排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/algo-bubblesort.html">冒泡排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/17/java8-CompletableFuture.html">java8中CompletableFuture详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/17/java-zookeeper-curator.html">zookeeper客户端之curator</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/16/Java-PriorityQueue.html">Java优先级队列PriorityQueue</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/13/java-LockSupport.html">java-LockSupport详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/mq-rocketmq-cluster.html">rocketmq集群搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/mq-rocketmq-quickstart.html">rocketmq快速入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/linux-zero-copy.html">linux零拷贝原理（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/java-jdk9-new-features.html">java-jdk9-new-features</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/10/java-Experienced-Developer-Teach-You-Five-Things.html">经验丰富的Java开发者教给你的五件事</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/10/mq-pages.html">MQ资料汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/10/DTP-best-practice.html">分布式事务典型处理方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/spring-xa-transactions-using.html">使用spring处理分布式事务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/mysql-text-defaultValue.html">mysql-text-defaultValue</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/03/transaction-understanding-jta.html">深入理解JTA事务处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/03/transaction-jta-deeplearning.html">JTA 深度历险 - 原理与实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/03/transaction-management-under-j2ee.html">J2EE事务管理详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/02/java-design-pattern-summary.html">java-design_pattern-summary</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/02/spring-DTP-patterns.html">spring处理分布式事务（使用或不使用XA）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/mysql-master-slave-thinking.html">mysql-master-slave-thinking</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/31/java-magic-finally.html">java魔法之finally</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/31/java-magic-0xCAFEBABE.html">java魔法之0xCAFEBABE</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/31/java-magic-java-dot-net-dot-url.html">java魔法之java.net.Url</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/31/java-magic-unsafe.html">java魔法之unsafe</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/31/java-AtomicLong.html">java中原子变量之AtomicLong</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/30/distribute-transaction-manage.html">分布式系统的事务处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/30/the-pattern-updateCache.html">缓存更新的套路</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/29/java8-lambda.html">java8 lambda表达式详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/28/spring-annotation-value.html">spring中注解@Value解密</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/28/spring-PropertyPlaceholderConfigurer.html">spring扩展点之PropertyPlaceholderConfigurer</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/28/mac-install-python-mysql.html">mac上安装Python-Mysql</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/27/mysql-mofidy-charset.html">mysql修改表-字段-库的字符集</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/25/java8-stream.html">java8-stream</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/23/java8-optional.html">java8-optional</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/23/java-8-features-tutorial.html">java-8-features-tutorial</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/06/java-DesignPatterns-flyweight.html">java-设计模式之-享元模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/05/java-Design-Patterns-builder.html">java-设计模式之-建造者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/03/java-DesignPatterns-proxy.html">java-设计模式之-代理模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/01/java-DesignPatterns-adapter.html">java-设计模式之-适配器模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/01/java-DesignPatterns-facade.html">java-设计模式之-外观模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/01/golang-execute-file-path.html">java-设计模式之-外观模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/01/java-DesignPatterns-bridge.html">java-设计模式之-桥接模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/28/java-DesignPatterns-command.html">java-设计模式之-命令模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/26/java-DesignPatterns-abstractFactory.html">java-设计模式之-抽象工厂模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/26/java-DesignPatterns-factoryMethod.html">java-设计模式之-工程方法模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/java-DesignPatterns-simpleFactory.html">java-设计模式之-简单工程模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/java-DesignPatterns-decorator.html">java-设计模式之-装饰者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/nginx-cache.html">nginx缓存功能介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/25/java-DesignPatterns-observer.html">java设计模式之-观察者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/nginx-rewrite.html">nginx配置rewrite指令详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/java-singleton.html">java实现单例模式的几种方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/java-DesignPatterns-Singleton.html">设计模式之-单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/java-DesignPatterns-UML.html">设计模式之-UML类图快速入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/23/java-DesignPatterns-Strategy.html">设计模式之-策略模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/22/java-HashMap-MaxmumEntries.html">java中HashMap的最大容量解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/algo-stack-calculateExp.html">用栈实现后缀表达式的计算</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/16/algo-prime-number.html">素数相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/16/algo-gcd.html">求两个整数的最大公约数</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/java-HowThreadLocalWork.html">ThreadLocal正解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/java-Reference.html">java Reference 详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/SpringMVC-annotationDriven.html">mvc:annotation-driver</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/11/golang-effective-go.html">golang-effective-go</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/10/openresty-lua-nginx-module.html">openresty-lua-nginx-module</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/linux-max-fd.html">linux中最大文件描述符数</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/the-difference-between-301-and-302.html">HTTP301和302的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/08/nodejs-heapdump.html">nodejs调试工具之heapdump简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/08/nodejs-gc.html">Node.js 调试 GC 以及内存暴涨的分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/07/nodejs-debug.html">NodeJS的代码调试和性能调优</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/07/siege-introduce.html">压测工具siege简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/06/binary-search-tree.html">二叉查找树</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/full-print-BinaryTree.html">full-print-BinaryTree</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/02/best-10-practice-from-linkedin.html">LinkedIn关于提高Node.JS服务的10个建议</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/02/distributed-id-generation.html">5分钟了解分布式ID生成方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/java-LinkedList.html">java-LinkedList实现解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/java-LinkedHashMap.html">java-LinkedHashMap知识点汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/java-HashMap.html">java-HashMap知识点汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/japanese-50-yin.html">日语50音图学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/25/linux-netcat.html">Linux Netcat 命令用法简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/24/linux-backlog-maxconn.html">linux网络编程backlog和somaxconn</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/21/npm-11-useful-tips.html">npm11个提供工作效率的用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/linux-network-io.html">Linux IO模式及 select、poll、epoll详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/linux-io-epoll.html">Linux下的I/O复用与epoll详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/mac-osx-kernel.html">mac-osx-kernel</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/java-real-data-type-size.html">Java中数据类型真实的内存占用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/19/vim-fileencoding.html">vim-文件编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodejs-exports-and-module-expots.html">nodejs中exports和module.expots异同</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodejs-module-os.html">nodejs模块-os模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodejs-module-path.html">nodejs模块path简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/Fibers-and-Threads-in-node.html">Fibers-and-Threads-in-node</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodejs-module-querystring.html">nodejs模块之querystring</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodejs-module-Readline.html">nodejs模块之readline</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/jquery-selector.html">jquery选择器详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/pm2-readme.html">pm2使用简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/fastjson-use.html">fastjson使用简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/character-set.html">字符集详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/linux-hostname.html">linux命令hostname详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/linux-delete-file-not-free-the-space.html">linux删除文件但磁盘空间不释放</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/nodeJs-module-async.html">nodeJs解决异步回调方案之module-async</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/redis-sentinel.html">redis哨兵功能简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/17/http-cache.html">http缓存详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/golang-import.html">golang中import语句详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/java-thread-profile.html">java线程必备知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/nodejs-globals.html">Nodejs全局对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/golang-flag.html">golang命令行参数解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/golang-file.html">golang文件操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/golang-userinfo.html">golang 用户信息获取</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/golang-time.html">golang时间操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/java-BlockingQueue.html">Java的BlockingQueue详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/java-runnable-callable-future.html">Java中的Runnable、Callable、Future、FutureTask的区别与示例</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/java-Queue.html">java队列Queue接口详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/strace-learn.html">手把手教你用Strace诊断问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/too-many-open-files.html">too-many-open-files</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/linux-strace.html">linux工具-strace</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/http-tranfer-encoding.html">HTTP 协议中的 Transfer-Encoding</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/lombook.html">lombook工具包简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-file-size.html">golang编译后文件编写的技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-cross-compile.html">golang交叉编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-performance-optimize-string.html">Go性能优化技巧-string</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-performance-optimize-array.html">Go性能优化技巧-array</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-performance-optimize-map.html">Go性能优化技巧-map</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-defer.html">golang之defer简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-chan.html">golang之chan简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/golang-build-version.html">golang自动生成版本信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/15/how-to-get-goroutine-id.html">如何获取goroutine的id</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/fifty-common-Mistakes-for-New-Golang-Devs.html">50个go新手开发常见的错误</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/ten-best-practise-for-java-exception.html">java异常处理最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/golang-error-handler.html">golang错误处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/seven-things-about-golang.html">关于go你必须知道的7件事</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/golang-tools-build.html">go自带工具build的用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/golang-gdb-debug.html">golang程序GDB调试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/hexo-post-asset-folder-html.html">hexo使用post_asset_folder功能文章链接不能以html结尾</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/hexo-codeblock-multiblank.html">hexo代码块前后空白行问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/java-serialization-deepknow.html">java-serialization-deepknow</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/golang-unsafe.html">golang的unsafe包简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/IDCardNo-algo.html">身份证号验证算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/byte-order.html">网络字节序</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/golang-testing.html">golang代码测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/linux-tool-dig.html">linux-tool-dig</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/golang-md5.html">golang计算字符串MD5</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/golang-time-format.html">golang时间格式化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/golang-open-browser.html">golang打开系统浏览器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/mq-compare.html">常见MQ产品比较</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/golang-user-define-json-UnmarshalJSON.html">golang进行json数据的解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/find-join-point-ofTwoIntersectList.html">查找无环单链表的相交节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/isIntersectWithLoop.html">单链表-链表有环如何判断相交</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/find-the-join-point-in-list.html">找出单链表有环的入口节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/list-hasCircle.html">判断单链表是否有环</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/find-mid-post-in-list.html">找出单链表的中间节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/find-the-kth-node-in-list.html">找出单链表倒数第K个节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/reverse-one-direction-list.html">单链表逆转</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/delete-listNode-in-O1.html">O(1)时间内删除链表节点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/reverse-print-list.html">单链表的逆序打印</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/merge-two-sorted-list.html">合并两个升序的单向链表</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/print-NxN-matrix.html">打印NxN矩阵的对角线</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/service-discovery.html">服务发现介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/web-reply-attack.html">web重放攻击介绍和防御方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/process-exception-in-web-dev.html">web开发异常统一处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/maven-test.html">maven-surefire-plugin简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/spring-aop-pointcut-expression.html">spring aop 切点表达式介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/avoid-NullPointException-Java.html">java程序避免NullPointException最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/jvm-codecache.html">JVM-codecache内存区域介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/13/logstash-input-file.html">logstash-input-file</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/12/when-to-use-hadoop-toolbox.html">Hadoop-Hbase-Hive-Pig关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/14/JVM-Tools.html">有用的JVM工具简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/12/IllegalMonitorStateException.html">诡异的异常IllegalMonitorStateException</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/11/HowMysqlLoadDataWorks.html">mysql load data infile 简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/10/why-not-use-finalize.html">为什么不使用finalize</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/05/14/mac-sshd.html">mac-sshd</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/22/java-Guava-Joiner.html">Guava-Joiner</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/22/theDayEndOfJd.html">朝林最后一天</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/22/java-Guava-Splitor.html">Guava-Spilitor</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/17/springMVCOutlines.html">Spring MVC HandlerMapping HandlerAdapter</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/17/howJekyllWorks.html">How Jekyll works</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/16/JVMGcAlgorithm.html">JVM垃圾收集算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/16/githubblog.html">Jekyll 快速入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/16/JVMOptimize.html">JVM常用参数和调优</a></li></ul>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 kongwenqiang
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
    var inputArea = document.querySelector("#local-search-input");
    var getSearchFile = function(){
        var path = "/search.xml";
        alert(11111);
        searchFunc(path, 'local-search-input', 'local-search-result');
    }
    inputArea.onfocus = function(){
      getSearchFile()
    }

    var $resetButton = $("#search-form .fa-times");

    var $resultArea = $("#local-search-result");
    inputArea.oninput = function(){ $resetButton.show(); }

    resetSearch = function(){
        $resultArea.html("");
        document.querySelector("#search-form").reset();
        $resetButton.hide();
        $(".no-result").hide();
    }

    inputArea.onkeydown = function(){
        if(event.keyCode==13) {
          return false
        }
    }

    $resultArea.bind("DOMNodeRemoved DOMNodeInserted", function(e) {
        if (!$(e.target).text()) {
            $(".no-result").show(200);
        } else {
          $(".no-result").hide();
        }
    })

</script>

  </div>
</body>
</html>